var generators = require('yeoman-generator');
var options = {};

module.exports = generators.Base.extend({
  constructor: function() {
    generators.Base.apply(this, arguments);

    // This method adds support for a `--with-database` flag
    //this.option('with-database');
    //this.log('with-response-json: ' + this.options['with-response-json']);
    //options.withResponseJson = this.options['with-response-json'];


    this.argument('modelName', { type: String, required: true });
  },

  default: function() {
    
    var modelNameSnake = this.modelName.substr(0,1).toLowerCase()+this.modelName.substr(1, this.modelName.length-1);
    this.log('modelNameSnake:'+modelNameSnake);
    this.log('generating '+this.modelName+'...');
    this.fs.copyTpl(
      this.templatePath('models/MongooseModel.js'),
      this.destinationPath('models/'+this.modelName+'.js'),
      {modelName: this.modelName, modelNameSnake: modelNameSnake}
    );
    this.log('done');
  },

  install: function() {
    this.npmInstall(['mongoose-updated_at'], { 'save': true });
    
  },


});
